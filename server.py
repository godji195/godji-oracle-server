from flask import Flask, request, jsonify
import random

app = Flask(__name__)

# ข้อความทำนายแต่ละเดือน
monthly_fortunes = [
    "เดือนนี้คุณจะได้รับโอกาสใหม่ ๆ ในการทำงาน",
    "เดือนนี้ความรักจะสดใส มีคนเข้ามาทำให้หัวใจเต้นแรง",
    "เดือนนี้มีโชคลาภเล็ก ๆ น้อย ๆ จากการเดินทาง",
    "เดือนนี้ต้องระวังการใช้เงิน อย่าประมาท",
    "เดือนนี้จะได้รับข่าวดีจากครอบครัว",
    "เดือนนี้เหมาะกับการเริ่มต้นสิ่งใหม่ ๆ",
    "เดือนนี้สุขภาพแข็งแรง แต่ต้องพักผ่อนให้เพียงพอ",
    "เดือนนี้จะพบเจอมิตรภาพใหม่ ๆ ที่มีค่า",
    "เดือนนี้มีโอกาสเลื่อนตำแหน่งหรือได้รับคำชม",
    "เดือนนี้มีเกณฑ์ได้เดินทางไกล หรือทำโปรเจ็กต์สำเร็จ",
    "เดือนนี้ต้องระวังอารมณ์ตัวเอง อาจมีเรื่องไม่พอใจ",
    "เดือนนี้โชคชะตาหนุนส่ง เหมาะกับการวางแผนอนาคต"
]

@app.route('/fortune', methods=['POST'])
def fortune():
    data = request.get_json()
    birth_date = data.get('birth_date')

    months = [
        "มกราคม", "กุมภาพันธ์", "มีนาคม", "เมษายน",
        "พฤษภาคม", "มิถุนายน", "กรกฎาคม", "สิงหาคม",
        "กันยายน", "ตุลาคม", "พฤศจิกายน", "ธันวาคม"
    ]

    # สุ่มคำทำนายรายเดือน
    year_fortune = {}
    for month in months:
        year_fortune[month] = random.choice(monthly_fortunes)

    return jsonify({
        "birth_date": birth_date,
        "year_fortune": year_fortune
    })

if __name__ == '__main__':
    app.run(host='0.0.0.0', port=8080)
